# 매치메이킹 파트

## 매치 메이킹 클래스
``` txt
클라가 서버에게 매칭 시작을 할게요 라는 패킷을 전송을 한다면 그 받은 유저를 큐에 집어넣어 큐에 게임에 접속가능한 최대 인원의 플레이어가 모인다면 그 유저를 잘라서 게임 세션에 집어넣는 방식으로 매치메이킹 구성을 하게 되었습니다.
```

## 매칭 시작
``` txt
매칭 시작을 할 때 패킷 생성을 한번만 보내고 그 안에 상대방 아이디를 넣어주면 가능하겠지 / foreach를 통해서 들어온 유저를 사용하면 패킷 제작을 한번만 하면 되겠지 라고 생각을 하고 제작을 했으나 그런 방식으로 하니 한 클라에서 null reception오류가 나타나게 되어서 결국 패킷은 두번 생성해서 플레이어1 플레이어2를 한번씩 보내는 방식을 이용하게 되었습니다.
매칭 중에 나가는 유저가 있을 경우를 대비하여서 예외 조건을 만들어놓는 코드를 추가하였습니다.
```

## 매칭 완료 패킷 생성
``` txt
InitialGameState와 GameState를 생성을 해서 보내줘야 해서 처음에는 proto파일에서 InitialGameState와 GameState를 가져와서 사용하면 되겠다라고 생각을 하고 사용을 했을 때 전송이 안되는 오류가 생겨서 찾아본 결과 GamePacket을 가져온 후 거기서 객체로 묶은 후 pakcet을 만들어야 한다는 점을 놓쳐서 오류가 생겼습니다. 
이곳에서 보내줄 때 path도 생성을 하여서 보내주는 데 이곳에서 매판마다의 랜덤적인 path를 제작하고자 알고리즘적 계산을 한 후 던질려고 하니 시간적인 여유가 없어서 랜덤을 이용해서 간단히 구현을 하고자 하였습니다. 근데 클라마다 접근을 하는 방식에서 랜덤값이 다르게 받아간다라는 점을 알게 되어서 이부분도 게임세션이 생성이 될 떄 한번만 만들고 이것을 두 유저에게 주는 방식으로 구현을 하게 되었습니다.
```